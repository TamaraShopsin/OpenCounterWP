jQuery(document).ready(function(a){a(".visual-form-builder").each(function(){a(this).validate({rules:{"vfb-secret":{required:true,digits:true,maxlength:2}},onkeyup:function(b){if(b.type=="password"){this.element(b)}else{return true}},errorPlacement:function(b,c){if(c.is(":radio")||c.is(":checkbox")){b.appendTo(c.parent().parent())}else{if(c.is(":password")){b.hide()}else{b.insertAfter(c)}}}})});a(".vfb-date-picker").datepicker();if(a("#sendmail").is(":visible")){a("#sendmail").attr("disabled",false)}else{a("#sendmail").attr("disabled","disabled")}a(document).on("click",".vfb-page-next",function(c){c.preventDefault();var d=a(this).attr("id"),b=parseInt(d.replace(/page-/,""));a(".page-"+b).fadeIn();a(this).fadeOut();if(a("#sendmail").is(":visible")){a("#sendmail").attr("disabled",false)}else{a("#sendmail").attr("disabled","disabled")}});a(".colorPicker").each(function(){var c=a(this),d=c.attr("id"),b=d.replace(/color-/,"");c.farbtastic("#vfb-"+b)});a(".colorPicker").hide();a(".color:input").focus(function(){var c=a(this).attr("id"),b=c.replace(/vfb-/,"");a("#color-"+b).show()}).blur(function(){var c=a(this).attr("id"),b=c.replace(/vfb-/,"");a("#color-"+b).hide()});a(".auto").each(function(){var b=a(this).closest("form").find('input[name="form_id"]').val();var c=a(this).attr("id").match(new RegExp(/(\d+)$/g),"");a("#"+a(this).attr("id")).autocomplete({delay:200,source:function(e,d){a.ajax({url:VfbAjax.ajaxurl,type:"GET",async:true,cache:false,dataType:"json",data:{action:"visual_form_builder_autocomplete",term:e.term,form:b,field:c[0]},success:function(f){d(a.map(f,function(g){return{value:g.value}}))}})}})});a.validator.addMethod("username",function(e,d){var c=this,b;a.ajax({url:VfbAjax.ajaxurl,type:"POST",async:false,cache:false,data:{action:"visual_form_builder_check_username",username:e},success:function(f){b=(f=="true")?true:false}});a.validator.messages.username=e+" is already in use.";return b},"The username entered is already in use");a.validator.addMethod("card",function(c,b){a(b).removeClass("mastercard visa american-express discover diners-club jcb");c=c.replace(/[ -]/g,"");if(c.match(/^5[1-5]/)){a(b).addClass("mastercard");a.validator.messages.card=(c.length<16)?"Not enough numbers. MasterCard uses 16 digits.":(c.length>16)?"Too many numbers. MasterCard uses 16 digits.":"";return this.optional(b)||c.length==16}else{if(c.match(/^4/)){a(b).addClass("visa");a.validator.messages.card=(c.length<16)?"Not enough numbers. Visa uses 16 digits.":(c.length>16)?"Too many numbers. Visa uses 16 digits.":"Please";return this.optional(b)||c.length==16}else{if(c.match(/^3(4|7)/)){a(b).addClass("american-express");a.validator.messages.card=(c.length<15)?"Not enough numbers. American Express uses 15 digits.":(c.length>15)?"Too many numbers. American Express uses 15 digits.":"";return this.optional(b)||c.length==15}else{if(c.match(/^6011/)){a(b).addClass("discover");a.validator.messages.card=(c.length<16)?"Not enough numbers. Discover uses 16 digits.":(c.length>16)?"Too many numbers. Discover uses 15 digits.":"";return this.optional(b)||c.length==16}else{if(c.match(/^(30[0-5]|36|38)/)){a(b).addClass("diners-club");a.validator.messages.card=(c.length<14)?"Not enough numbers. Diners Club uses 14 digits.":(c.length>14)?"Too many numbers. Diners Club uses 14 digits.":"";return this.optional(b)||c.length==14}else{if(c.match(/^(3|2131|1800)/)){a(b).addClass("jcb");a.validator.messages.card=(c.length<16)?"Not enough numbers. JCB uses 16 digits.":(c.length>16)?"Too many numbers. JCB uses 16 digits.":"";return this.optional(b)||c.length==16}else{return this.optional(b)}}}}}}},a.validator.messages.creditcard);a.validator.addMethod("phone",function(c,b){c=c.replace(/[\+\s\(\)\.\-\ ]/g,"");return this.optional(b)||c.length>9&&c.match(/^((\+)?[1-9]{1,2})?([-\s\.])?((\(\d{1,4}\))|\d{1,4})(([-\s\.])?[0-9]{1,12}){1,2}$/)},"Please enter a valid phone number. Most US/Canada and International formats accepted.");a.validator.addMethod("ipv4",function(c,b){return this.optional(b)||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i.test(c)},"Please enter a valid IP v4 address.");a.validator.addMethod("ipv6",function(c,b){return this.optional(b)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(c)},"Please enter a valid IP v6 address.")});(function(f){var b=/[a-z]/,g=/[A-Z]/,e=/[0-9]/,i=/[0-9].*[0-9]/,a=/[^a-zA-Z0-9]/,h=/^(.)\1+$/;function d(j,k){return{rate:j,messageKey:k}}function c(j){return j.substring(0,1).toLowerCase()+j.substring(1)}f.validator.passwordRating=function(l,p){if(!l||l.length<8){return d(0,"too-short")}if(p&&l.toLowerCase().match(p.toLowerCase())){return d(0,"similar-to-username")}if(h.test(l)){return d(1,"very-weak")}var k=b.test(l),m=g.test(c(l)),o=e.test(l),n=i.test(l),j=a.test(l);if(k&&m&&o||k&&n||m&&n||j){return d(4,"strong")}if(k&&m||k&&o||m&&o){return d(3,"good")}return d(2,"weak")};f.validator.passwordRating.messages={"similar-to-username":"Too similar to username","too-short":"Too short","very-weak":"Very weak",weak:"Weak",good:"Good",strong:"Strong"};f.validator.addMethod("password",function(n,k,o){var j=k.value,p=f(typeof o!="boolean"?o:[]);var l=f.validator.passwordRating(j,p.val());var m=f(".password-meter",k.form);m.removeClass("similar-to-username too-short very-weak weak good strong").addClass(l.messageKey).text(f.validator.passwordRating.messages[l.messageKey]);if(this.optional(k)){m.removeClass("similar-to-username too-short very-weak weak good strong").text("Password Strength");return true}return l.rate>2},"&nbsp;");f.validator.classRuleSettings.password={password:true}})(jQuery);